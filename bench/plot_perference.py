import matplotlib.pyplot as plt
import numpy as np

# 数据，包括添加的'total'类别
categories = [
    "total", "Existence", "Reverse Existence", "NLI", "Spatial relationship", "Keyframe extraction","Constrained OCR",  "Details Event",
    "Counting","Attribute Change", "Temporal Reasoning", "Space-time computing" , 
     "Instruction manual", "Summary"
]

# # MiniCPM-v
# noimage = {"total": {"total": 2584, "valid": 2584, "correct": 476, "correct_rate": 0.18421052631578946}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 40, "correct_rate": 0.15151515151515152}, "NLI": {"total": 153, "valid": 153, "correct": 34, "correct_rate": 0.2222222222222222}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 80, "correct_rate": 0.3333333333333333}, "Keyframe extraction": {"total": 289, "valid": 289, "correct": 50, "correct_rate": 0.17301038062283736}, "Details Event": {"total": 200, "valid": 200, "correct": 50, "correct_rate": 0.25}, "Space-time computing": {"total": 215, "valid": 215, "correct": 31, "correct_rate": 0.14418604651162792}, "Counting": {"total": 267, "valid": 267, "correct": 43, "correct_rate": 0.16104868913857678}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 30, "correct_rate": 0.19607843137254902}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 16, "correct_rate": 0.17777777777777778}, "Existence": {"total": 211, "valid": 211, "correct": 29, "correct_rate": 0.13744075829383887}, "Summary": {"total": 215, "valid": 215, "correct": 32, "correct_rate": 0.14883720930232558}, "Attribute Change": {"total": 126, "valid": 126, "correct": 20, "correct_rate": 0.15873015873015872}, "Instruction manual": {"total": 161, "valid": 161, "correct": 21, "correct_rate": 0.13043478260869565}}
# image_first = {"total": {"total": 2584, "valid": 2560, "correct": 427, "correct_rate": 0.166796875}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 42, "correct_rate": 0.1590909090909091}, "NLI": {"total": 153, "valid": 153, "correct": 20, "correct_rate": 0.13071895424836602}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 66, "correct_rate": 0.275}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 44, "correct_rate": 0.15331010452961671}, "Details Event": {"total": 200, "valid": 200, "correct": 45, "correct_rate": 0.225}, "Space-time computing": {"total": 215, "valid": 214, "correct": 31, "correct_rate": 0.14485981308411214}, "Counting": {"total": 267, "valid": 267, "correct": 47, "correct_rate": 0.1760299625468165}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 33, "correct_rate": 0.21568627450980393}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 11, "correct_rate": 0.12222222222222222}, "Existence": {"total": 211, "valid": 211, "correct": 13, "correct_rate": 0.061611374407582936}, "Summary": {"total": 215, "valid": 212, "correct": 39, "correct_rate": 0.18396226415094338}, "Attribute Change": {"total": 126, "valid": 126, "correct": 17, "correct_rate": 0.1349206349206349}, "Instruction manual": {"total": 161, "valid": 143, "correct": 19, "correct_rate": 0.13286713286713286}}

# video_first = {"total": {"total": 2584, "valid": 2560, "correct": 441, "correct_rate": 0.172265625}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 41, "correct_rate": 0.1553030303030303}, "NLI": {"total": 153, "valid": 153, "correct": 14, "correct_rate": 0.0915032679738562}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 78, "correct_rate": 0.325}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 41, "correct_rate": 0.14285714285714285}, "Details Event": {"total": 200, "valid": 200, "correct": 45, "correct_rate": 0.225}, "Space-time computing": {"total": 215, "valid": 214, "correct": 32, "correct_rate": 0.14953271028037382}, "Counting": {"total": 267, "valid": 267, "correct": 42, "correct_rate": 0.15730337078651685}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 46, "correct_rate": 0.3006535947712418}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 11, "correct_rate": 0.12222222222222222}, "Existence": {"total": 211, "valid": 211, "correct": 15, "correct_rate": 0.07109004739336493}, "Summary": {"total": 215, "valid": 212, "correct": 37, "correct_rate": 0.17452830188679244}, "Attribute Change": {"total": 126, "valid": 126, "correct": 20, "correct_rate": 0.15873015873015872}, "Instruction manual": {"total": 161, "valid": 143, "correct": 19, "correct_rate": 0.13286713286713286}}

# # MiniCPM-o
# noimage = {"total": {"total": 2584, "valid": 2584, "correct": 456, "correct_rate": 0.17647058823529413}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 38, "correct_rate": 0.14393939393939395}, "NLI": {"total": 153, "valid": 153, "correct": 24, "correct_rate": 0.1568627450980392}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 72, "correct_rate": 0.3}, "Keyframe extraction": {"total": 289, "valid": 289, "correct": 44, "correct_rate": 0.1522491349480969}, "Details Event": {"total": 200, "valid": 200, "correct": 44, "correct_rate": 0.22}, "Space-time computing": {"total": 215, "valid": 215, "correct": 32, "correct_rate": 0.14883720930232558}, "Counting": {"total": 267, "valid": 267, "correct": 37, "correct_rate": 0.13857677902621723}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 39, "correct_rate": 0.2549019607843137}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 12, "correct_rate": 0.13333333333333333}, "Existence": {"total": 211, "valid": 211, "correct": 30, "correct_rate": 0.14218009478672985}, "Summary": {"total": 215, "valid": 215, "correct": 36, "correct_rate": 0.16744186046511628}, "Attribute Change": {"total": 126, "valid": 126, "correct": 24, "correct_rate": 0.19047619047619047}, "Instruction manual": {"total": 161, "valid": 161, "correct": 24, "correct_rate": 0.14906832298136646}}
# image_first = {"total": {"total": 2584, "valid": 2560, "correct": 457, "correct_rate": 0.178515625}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 44, "correct_rate": 0.16666666666666666}, "NLI": {"total": 153, "valid": 153, "correct": 20, "correct_rate": 0.13071895424836602}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 75, "correct_rate": 0.3125}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 46, "correct_rate": 0.1602787456445993}, "Details Event": {"total": 200, "valid": 200, "correct": 48, "correct_rate": 0.24}, "Space-time computing": {"total": 215, "valid": 214, "correct": 25, "correct_rate": 0.11682242990654206}, "Counting": {"total": 267, "valid": 267, "correct": 50, "correct_rate": 0.18726591760299627}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 41, "correct_rate": 0.2679738562091503}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 6, "correct_rate": 0.06666666666666667}, "Existence": {"total": 211, "valid": 211, "correct": 20, "correct_rate": 0.0947867298578199}, "Summary": {"total": 215, "valid": 212, "correct": 31, "correct_rate": 0.14622641509433962}, "Attribute Change": {"total": 126, "valid": 126, "correct": 26, "correct_rate": 0.20634920634920634}, "Instruction manual": {"total": 161, "valid": 143, "correct": 25, "correct_rate": 0.17482517482517482}}

# video_first = {"total": {"total": 2584, "valid": 2560, "correct": 437, "correct_rate": 0.170703125}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 39, "correct_rate": 0.14772727272727273}, "NLI": {"total": 153, "valid": 153, "correct": 13, "correct_rate": 0.08496732026143791}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 75, "correct_rate": 0.3125}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 42, "correct_rate": 0.14634146341463414}, "Details Event": {"total": 200, "valid": 200, "correct": 47, "correct_rate": 0.235}, "Space-time computing": {"total": 215, "valid": 214, "correct": 38, "correct_rate": 0.17757009345794392}, "Counting": {"total": 267, "valid": 267, "correct": 35, "correct_rate": 0.13108614232209737}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 44, "correct_rate": 0.2875816993464052}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 11, "correct_rate": 0.12222222222222222}, "Existence": {"total": 211, "valid": 211, "correct": 17, "correct_rate": 0.08056872037914692}, "Summary": {"total": 215, "valid": 212, "correct": 35, "correct_rate": 0.1650943396226415}, "Attribute Change": {"total": 126, "valid": 126, "correct": 17, "correct_rate": 0.1349206349206349}, "Instruction manual": {"total": 161, "valid": 143, "correct": 24, "correct_rate": 0.16783216783216784}}

# # InternVL-8B
# noimage = {"total": {"total": 2584, "valid": 2584, "correct": 423, "correct_rate": 0.16369969040247678}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 49, "correct_rate": 0.1856060606060606}, "NLI": {"total": 153, "valid": 153, "correct": 9, "correct_rate": 0.058823529411764705}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 65, "correct_rate": 0.2708333333333333}, "Keyframe extraction": {"total": 289, "valid": 289, "correct": 36, "correct_rate": 0.1245674740484429}, "Details Event": {"total": 200, "valid": 200, "correct": 41, "correct_rate": 0.205}, "Space-time computing": {"total": 215, "valid": 215, "correct": 31, "correct_rate": 0.14418604651162792}, "Counting": {"total": 267, "valid": 267, "correct": 40, "correct_rate": 0.149812734082397}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 47, "correct_rate": 0.30718954248366015}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 9, "correct_rate": 0.1}, "Existence": {"total": 211, "valid": 211, "correct": 4, "correct_rate": 0.018957345971563982}, "Summary": {"total": 215, "valid": 215, "correct": 39, "correct_rate": 0.1813953488372093}, "Attribute Change": {"total": 126, "valid": 126, "correct": 32, "correct_rate": 0.25396825396825395}, "Instruction manual": {"total": 161, "valid": 161, "correct": 21, "correct_rate": 0.13043478260869565}}
# image_first = {"total": {"total": 2584, "valid": 2560, "correct": 482, "correct_rate": 0.18828125}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 46, "correct_rate": 0.17424242424242425}, "NLI": {"total": 153, "valid": 153, "correct": 23, "correct_rate": 0.1503267973856209}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 80, "correct_rate": 0.3333333333333333}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 44, "correct_rate": 0.15331010452961671}, "Details Event": {"total": 200, "valid": 200, "correct": 50, "correct_rate": 0.25}, "Space-time computing": {"total": 215, "valid": 214, "correct": 38, "correct_rate": 0.17757009345794392}, "Counting": {"total": 267, "valid": 267, "correct": 41, "correct_rate": 0.15355805243445692}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 49, "correct_rate": 0.3202614379084967}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 6, "correct_rate": 0.06666666666666667}, "Existence": {"total": 211, "valid": 211, "correct": 6, "correct_rate": 0.02843601895734597}, "Summary": {"total": 215, "valid": 212, "correct": 44, "correct_rate": 0.20754716981132076}, "Attribute Change": {"total": 126, "valid": 126, "correct": 33, "correct_rate": 0.2619047619047619}, "Instruction manual": {"total": 161, "valid": 143, "correct": 22, "correct_rate": 0.15384615384615385}}
# video_first = {"total": {"total": 2555, "valid": 1849, "correct": 321, "correct_rate": 0.1736073553272039}, "Reverse Existence": {"total": 264, "valid": 223, "correct": 35, "correct_rate": 0.15695067264573992}, "NLI": {"total": 153, "valid": 152, "correct": 25, "correct_rate": 0.16447368421052633}, "Constrained OCR": {"total": 240, "valid": 164, "correct": 56, "correct_rate": 0.34146341463414637}, "Keyframe extraction": {"total": 286, "valid": 199, "correct": 20, "correct_rate": 0.10050251256281408}, "Details Event": {"total": 200, "valid": 147, "correct": 37, "correct_rate": 0.25170068027210885}, "Space-time computing": {"total": 209, "valid": 128, "correct": 18, "correct_rate": 0.140625}, "Counting": {"total": 266, "valid": 185, "correct": 29, "correct_rate": 0.15675675675675677}, "Spatial relationship": {"total": 153, "valid": 99, "correct": 28, "correct_rate": 0.2828282828282828}, "Temporal Reasoning": {"total": 90, "valid": 49, "correct": 4, "correct_rate": 0.08163265306122448}, "Existence": {"total": 211, "valid": 206, "correct": 11, "correct_rate": 0.05339805825242718}, "Summary": {"total": 205, "valid": 107, "correct": 22, "correct_rate": 0.205607476635514}, "Attribute Change": {"total": 126, "valid": 86, "correct": 19, "correct_rate": 0.22093023255813954}, "Instruction manual": {"total": 152, "valid": 104, "correct": 17, "correct_rate": 0.16346153846153846}}

# # InternVL-26B
# noimage = {"total": {"total": 2584, "valid": 2584, "correct": 457, "correct_rate": 0.17685758513931887}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 45, "correct_rate": 0.17045454545454544}, "NLI": {"total": 153, "valid": 153, "correct": 19, "correct_rate": 0.12418300653594772}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 79, "correct_rate": 0.32916666666666666}, "Keyframe extraction": {"total": 289, "valid": 289, "correct": 36, "correct_rate": 0.1245674740484429}, "Details Event": {"total": 200, "valid": 200, "correct": 48, "correct_rate": 0.24}, "Space-time computing": {"total": 215, "valid": 215, "correct": 36, "correct_rate": 0.16744186046511628}, "Counting": {"total": 267, "valid": 267, "correct": 33, "correct_rate": 0.12359550561797752}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 50, "correct_rate": 0.32679738562091504}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 16, "correct_rate": 0.17777777777777778}, "Existence": {"total": 211, "valid": 211, "correct": 9, "correct_rate": 0.04265402843601896}, "Summary": {"total": 215, "valid": 215, "correct": 37, "correct_rate": 0.17209302325581396}, "Attribute Change": {"total": 126, "valid": 126, "correct": 23, "correct_rate": 0.18253968253968253}, "Instruction manual": {"total": 161, "valid": 161, "correct": 26, "correct_rate": 0.16149068322981366}}
# image_first = {"total": {"total": 2584, "valid": 2560, "correct": 496, "correct_rate": 0.19375}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 45, "correct_rate": 0.17045454545454544}, "NLI": {"total": 153, "valid": 153, "correct": 25, "correct_rate": 0.16339869281045752}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 68, "correct_rate": 0.2833333333333333}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 47, "correct_rate": 0.16376306620209058}, "Details Event": {"total": 200, "valid": 200, "correct": 42, "correct_rate": 0.21}, "Space-time computing": {"total": 215, "valid": 214, "correct": 45, "correct_rate": 0.2102803738317757}, "Counting": {"total": 267, "valid": 267, "correct": 45, "correct_rate": 0.16853932584269662}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 47, "correct_rate": 0.30718954248366015}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 8, "correct_rate": 0.08888888888888889}, "Existence": {"total": 211, "valid": 211, "correct": 25, "correct_rate": 0.11848341232227488}, "Summary": {"total": 215, "valid": 212, "correct": 45, "correct_rate": 0.21226415094339623}, "Attribute Change": {"total": 126, "valid": 126, "correct": 30, "correct_rate": 0.23809523809523808}, "Instruction manual": {"total": 161, "valid": 143, "correct": 24, "correct_rate": 0.16783216783216784}}
# video_first = {"total": {"total": 2584, "valid": 2560, "correct": 528, "correct_rate": 0.20625}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 38, "correct_rate": 0.14393939393939395}, "NLI": {"total": 153, "valid": 153, "correct": 51, "correct_rate": 0.3333333333333333}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 78, "correct_rate": 0.325}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 39, "correct_rate": 0.13588850174216027}, "Details Event": {"total": 200, "valid": 200, "correct": 49, "correct_rate": 0.245}, "Space-time computing": {"total": 215, "valid": 214, "correct": 30, "correct_rate": 0.14018691588785046}, "Counting": {"total": 267, "valid": 267, "correct": 40, "correct_rate": 0.149812734082397}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 56, "correct_rate": 0.3660130718954248}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 13, "correct_rate": 0.14444444444444443}, "Existence": {"total": 211, "valid": 211, "correct": 27, "correct_rate": 0.12796208530805686}, "Summary": {"total": 215, "valid": 212, "correct": 42, "correct_rate": 0.19811320754716982}, "Attribute Change": {"total": 126, "valid": 126, "correct": 29, "correct_rate": 0.23015873015873015}, "Instruction manual": {"total": 161, "valid": 143, "correct": 36, "correct_rate": 0.2517482517482518}}

# # InternVL-38B
# noimage = {"total": {"total": 2584, "valid": 2560, "correct": 575, "correct_rate": 0.224609375}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 33, "correct_rate": 0.125}, "NLI": {"total": 153, "valid": 153, "correct": 55, "correct_rate": 0.35947712418300654}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 85, "correct_rate": 0.3541666666666667}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 59, "correct_rate": 0.20557491289198607}, "Details Event": {"total": 200, "valid": 200, "correct": 55, "correct_rate": 0.275}, "Space-time computing": {"total": 215, "valid": 214, "correct": 43, "correct_rate": 0.20093457943925233}, "Counting": {"total": 267, "valid": 267, "correct": 50, "correct_rate": 0.18726591760299627}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 48, "correct_rate": 0.3137254901960784}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 9, "correct_rate": 0.1}, "Existence": {"total": 211, "valid": 211, "correct": 27, "correct_rate": 0.12796208530805686}, "Summary": {"total": 215, "valid": 212, "correct": 48, "correct_rate": 0.22641509433962265}, "Attribute Change": {"total": 126, "valid": 126, "correct": 38, "correct_rate": 0.30158730158730157}, "Instruction manual": {"total": 161, "valid": 143, "correct": 25, "correct_rate": 0.17482517482517482}}
# image_first = {"total": {"total": 2584, "valid": 2584, "correct": 523, "correct_rate": 0.20239938080495357}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 42, "correct_rate": 0.1590909090909091}, "NLI": {"total": 153, "valid": 153, "correct": 32, "correct_rate": 0.20915032679738563}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 80, "correct_rate": 0.3333333333333333}, "Keyframe extraction": {"total": 289, "valid": 289, "correct": 51, "correct_rate": 0.17647058823529413}, "Details Event": {"total": 200, "valid": 200, "correct": 50, "correct_rate": 0.25}, "Space-time computing": {"total": 215, "valid": 215, "correct": 36, "correct_rate": 0.16744186046511628}, "Counting": {"total": 267, "valid": 267, "correct": 45, "correct_rate": 0.16853932584269662}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 50, "correct_rate": 0.32679738562091504}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 8, "correct_rate": 0.08888888888888889}, "Existence": {"total": 211, "valid": 211, "correct": 22, "correct_rate": 0.10426540284360189}, "Summary": {"total": 215, "valid": 215, "correct": 44, "correct_rate": 0.20465116279069767}, "Attribute Change": {"total": 126, "valid": 126, "correct": 32, "correct_rate": 0.25396825396825395}, "Instruction manual": {"total": 161, "valid": 161, "correct": 31, "correct_rate": 0.19254658385093168}}
# video_first = {"total": {"total": 2584, "valid": 2560, "correct": 680, "correct_rate": 0.265625}, "Reverse Existence": {"total": 264, "valid": 264, "correct": 51, "correct_rate": 0.19318181818181818}, "NLI": {"total": 153, "valid": 153, "correct": 87, "correct_rate": 0.5686274509803921}, "Constrained OCR": {"total": 240, "valid": 240, "correct": 93, "correct_rate": 0.3875}, "Keyframe extraction": {"total": 289, "valid": 287, "correct": 56, "correct_rate": 0.1951219512195122}, "Details Event": {"total": 200, "valid": 200, "correct": 67, "correct_rate": 0.335}, "Space-time computing": {"total": 215, "valid": 214, "correct": 47, "correct_rate": 0.21962616822429906}, "Counting": {"total": 267, "valid": 267, "correct": 54, "correct_rate": 0.20224719101123595}, "Spatial relationship": {"total": 153, "valid": 153, "correct": 52, "correct_rate": 0.33986928104575165}, "Temporal Reasoning": {"total": 90, "valid": 90, "correct": 6, "correct_rate": 0.06666666666666667}, "Existence": {"total": 211, "valid": 211, "correct": 52, "correct_rate": 0.24644549763033174}, "Summary": {"total": 215, "valid": 212, "correct": 48, "correct_rate": 0.22641509433962265}, "Attribute Change": {"total": 126, "valid": 126, "correct": 28, "correct_rate": 0.2222222222222222}, "Instruction manual": {"total": 161, "valid": 143, "correct": 39, "correct_rate": 0.2727272727272727}}


# noimage_scores = []
# video_first_scores = []
# image_first_scores = []
# for i in range(len(categories)):
#     noimage_scores.append(noimage[categories[i]]["correct_rate"])
#     video_first_scores.append(video_first[categories[i]]["correct_rate"])
#     image_first_scores.append(image_first[categories[i]]["correct_rate"])


# 每种设置下的具体类别性能

##InternVL-78B
noimage_scores = [
    0.20859, 0.178, 0.190, 0.371, 0.208, 0.260, 0.228, 0.180, 0.346, 0.167, 0.043, 0.167, 0.214, 0.155
]
video_first_scores = [
    0.2863, 0.205, 0.601, 0.396, 0.195, 0.405, 0.131, 0.213, 0.431, 0.122, 0.280, 0.278, 0.262, 0.294
]
image_first_scores = [
    0.2434, 0.174, 0.418, 0.371, 0.160, 0.300, 0.196, 0.199, 0.405, 0.067, 0.161, 0.250, 0.262, 0.245
]

# 设置柱状图位置
x = np.arange(len(categories))  # 类别数量
width = 0.25  # 每个柱子的宽度

# 创建图形
fig, ax = plt.subplots(figsize=(9, 8))

# 绘制柱状图
bars_video_first = ax.bar(x - width, video_first_scores, width, label='Video first', color='tab:orange', alpha=0.8)
bars_image_first = ax.bar(x, image_first_scores, width, label='Image first', color='tab:green', alpha=0.8)
bars_noimage = ax.bar(x + width, noimage_scores, width, label='Text query', color='tab:blue', alpha=0.8)

# 添加每个柱子的文本标签，显示正确率
def add_text(bars, values):
    pass
    # for bar, value in zip(bars, values):
    #     ax.text(bar.get_x() + bar.get_width() / 2, bar.get_height() + 0.01, f'{value:.3f}', 
    #             ha='center', va='bottom', fontsize=10, color='black')
        # ax.text(bar.get_x() + bar.get_width() / 2, bar.get_height() - 0.10, f'{value:.3f}', 
        #         ha='center', va='top', fontsize=10, color='white', alpha=0.5)

# 添加标签到柱状图
add_text(bars_video_first, video_first_scores)
add_text(bars_image_first, image_first_scores)
add_text(bars_noimage, noimage_scores)

# 设置轴标签和标题
ax.set_xlabel('', fontsize=12)
ax.set_ylabel('Accuracy', fontsize=12)
ax.set_title('InternVL2.5-78B', fontsize=14)
ax.set_xticks(x)
abb_categories = ["Total", "Exist.", 'RE', 'NLI', 'SR', "KE", "CO", "DE", "Cnt.", "AC", "TR", "STC", "IM", "Sum."]
ax.set_xticklabels(abb_categories, rotation=45, ha="right", fontsize=10)

# 添加图例
ax.legend(prop={'size': 14})
# 显示网格
ax.grid(True, linestyle='--', alpha=0.7)

# 显示图形
plt.tight_layout()
plt.savefig('InternVL2.5-78B.png', dpi=600)
